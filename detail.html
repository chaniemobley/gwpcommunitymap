<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Community Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles/custom.css" type="text/css"/>
    <link rel="stylesheet" href="styles/animation.css" type="text/css"/>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"/>
    <script src="script/wow.js"></script>
    <script>
        new WOW().init();
    </script>
    <script src="script/script.js"></script>
</head>

<body>
<!--Whole page container start-->
<div class="container-full">
<!--Header start-->
<div class="jumbotron text-center bottomshadow maphead">
    <div class="container">
        <div class="row">
            <div class="pull-left">
                <ol class="breadcrumb">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Community Map</a></li>
                    <li class="active">City Market</li>
                </ol>
            </div>
        </div>
        <div class="row featured">
            <div class="col-sm-3 orglogo">
                <img src="images/citymarket.jpg" class="img-responsive"/>

                <h2>City Market</h2>
            </div>
            <div class="clearfix visible-xs-block"></div>
            <div class="col-sm-5">
                <p class="lead">You can stroll through our renovated historic landmark and enjoy a glass of wine...
                    pick up
                    something light for supper or purchase unique gifts... satisfy the inner foodie in you... or
                    simply hang out with family and friends.</p>
            </div>
            <div class="col-sm-4">
                <div class="reviews">
                    <div class="rating">
                        <i class="star wow slideLeft"></i>
                        <i class="star wow slideLeft"></i>
                        <i class="star wow slideLeft"></i>
                    </div>
                    <a href="#readreviews">Read reviews</a><br>
                </div>
                <div>
                    <p>
                        <a href="http://www.indycm.com" target="_blank">www.indycm.com</a><br>
                    <address>222 E Market St.<br>
                        Indianapolis, IN 46204
                    </address>
                    </p>
                </div>
                <div class="social">
                    <a href="http://www.facebook.com"><i class="socfacebook wow pullUp"></i></a>
                    <a href="http://www.twitter.com"><i class="soctwitter wow pullUp"></i></a>
                    <a href="http://www.instagram.com"><i class="socig wow pullUp"></i></a>
                    <a href="http://plus.google.com"><i class="socplus wow pullUp"></i></a>
                    <a href="http://www.youtube.com"><i class="socyoutube wow pullUp"></i></a>
                    <a href="http://www.linkedin.com"><i class="soclinked wow pullUp"></i></a>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Header end-->
<!--map start-->
<div id="map" style="text-align:center; margin-left:4px;">
    <style type="text/css">
        #map-canvas {
            width: 100%;
            height: 400px;

        }
    </style>
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAuPxpdHmYpkzi-d5gO1qWAy77jdwg1ZN4&sensor=false">
    </script>
    <script>
        //new
        var infowindow;
        (function () {

            google.maps.Map.prototype.markers = new Array();

            google.maps.Map.prototype.addMarker = function (marker) {
                this.markers[this.markers.length] = marker;
            };

            google.maps.Map.prototype.getMarkers = function () {
                return this.markers;
            };

            google.maps.Map.prototype.clearMarkers = function () {
                if (infowindow) {
                    infowindow.close();
                }

                for (var i = 0; i < this.markers.length; i++) {
                    this.markers[i].set_map(null);
                }
            };
        })();

        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(39.768403, -86.158068),
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                scrollwheel: false
            };

            var map = new google.maps.Map(document.getElementById("map-canvas"),
                    mapOptions);

            var a = new Array();


            var t = new Object();
            t.name = "City Market"
            t.lat = 39.7684662
            t.lng = -86.1540548
            t.desc = "<div style=\"width:100%; height:100%;\";><h4 style=\"font-weight:bold\"><a href=\"/clients/demo/communitymap/view/City+Market\">City Market</a></h4><div><a href=\"http://www.indycm.com\" target=\"_blank\">www.indycm.com</a></div><div>222 E Market St<br>Indianapolis, IN 46204</div></div>"
            a[0] = t;


            for (var i = 0; i < a.length; i++) {
                var latlng = new google.maps.LatLng(a[i].lat, a[i].lng);
                map.addMarker(createMarker(a[i].name, latlng, a[i].desc));
            }
            console.log(map.getMarkers());

            console.log(map.getMarkers());

            function createMarker(name, latlng, desc) {
                var marker = new google.maps.Marker({position: latlng, map: map, animation: google.maps.Animation.DROP,
                    title: name, icon: ''});
                google.maps.event.addListener(marker, "click", function () {
                    if (infowindow) infowindow.close();
                    infowindow = new google.maps.InfoWindow({content: desc});
                    infowindow.open(map, marker);
                });
                return marker;
            }

        }
        google.maps.event.addDomListener(window, 'load', initialize);
        google.maps.event.addDomListener(window, "resize", function () {
            google.maps.event.trigger(map, "resize");
        });

    </script>

    <div id="map-canvas"></div>

</div>
<!--map end-->
<!--content area begin-->
<div class="container orgdetail">
    <div class="row">
        <div class="col-xs-12" id="readreviews">
            <h1><i class="reviewicon wow hatch"></i> Reviews</h1>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Derek Glass on 10/18/2014 at 7:08 pm | 5 Stars</h3>
                </div>
                <div class="panel-body">
                    I love City Market. I would live here if they would let me.
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Derek Glass on 10/18/2014 at 7:08 pm | 3 Stars</h3>
                </div>
                <div class="panel-body">
                    City Market is okay. It's not the worst but it's not my favorite.
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Derek Glass on 10/18/2014 at 7:08 pm | 1 Stars</h3>
                </div>
                <div class="panel-body">
                    Eh I'm not a big fan of City Market.
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8">

            <h3>Add Review</h3>

            <div class="form">

                <form id="add-review-form" action="/communitymap/view/City+Market" method="post">
                    <div class="form-group">
                        <label for="AddReviewForm_first_name" class="required">First Name <span
                                class="required">*</span></label> <input class="form-control"
                                                                         name="AddReviewForm[first_name]"
                                                                         id="AddReviewForm_first_name" type="text"/>
                    </div>

                    <div class="form-group">
                        <label for="AddReviewForm_last_name" class="required">Last Name <span class="required">*</span></label>
                        <input class="form-control" name="AddReviewForm[last_name]" id="AddReviewForm_last_name"
                               type="text"/></div>

                    <div class="form-group">
                        <label for="AddReviewForm_email" class="required">Email <span class="required">*</span></label>
                        <input class="form-control" name="AddReviewForm[email]" id="AddReviewForm_email" type="email"/>
                    </div>

                    <div class="form-group">
                        <!--Perhaps find and using some sort of visual star rating plug in here?-->
                        <label for="AddReviewForm_rating" class="required">Rating <span
                                class="required">*</span></label> <select class="form-control"
                                                                          name="AddReviewForm[rating]"
                                                                          id="AddReviewForm_rating">
                        <option value="">[Select Rating]</option>
                        <option value="5">5 Stars</option>
                        <option value="4">4 Stars</option>
                        <option value="3">3 Stars</option>
                        <option value="2">2 Stars</option>
                        <option value="1">1 Star</option>
                    </select></div>

                    <div class="form-group">
                        <input id="ytAddReviewForm_is_enrolled" type="hidden" value="0"
                               name="AddReviewForm[is_enrolled]"/><input name="AddReviewForm[is_enrolled]"
                                                                         id="AddReviewForm_is_enrolled" value="1"
                                                                         type="checkbox"/><label
                            for="AddReviewForm_is_enrolled">&nbsp; I would like to receive regular updates with a list
                        of the top-rated organizations <span class="required">*</span></label></div>

                    <div class="form-group">
                        <label for="AddReviewForm_review" class="required">Review <span
                                class="required">*</span></label> <textarea id="AddReviewForm_review"
                                                                            name="AddReviewForm[review]"
                                                                            class="form-control"></textarea></div>

                    <div class="form-group">
                        <label for="AddReviewForm_verifyCode" class="required">Verify Code <span
                                class="required">*</span></label>

                        <div>
                            <img id="yw0" src="/communitymap/default/captcha/v/54f348b22c109" alt=""/> <input
                                class="verify-code form-control" name="AddReviewForm[verifyCode]"
                                id="AddReviewForm_verifyCode" type="text"/></div>
                        <div class="hint">Please enter the letters as they are shown in the image above.
                            <br/>Letters are not case-sensitive.
                        </div>
                    </div>

                    <div class="form-group buttons">
                        <input class="btn btn-primary" type="submit" name="yt0" value="Send"/></div>

                </form>
            </div>
            <!-- form -->
        </div>
        <div class="col-sm-4">
            <h4>Neighborhoods</h4>
            <ul class="list-group">
                <li class="list-group-item"><a href="/communitymap?neighborhood=Downtown"
                                               onclick="redirectMod('/communitymap?neighborhood=Downtown&')">Downtown</a>
                </li>
            </ul>
            <h4>Categories</h4>
            <ul class="list-group">
                <li class="list-group-item"><a href="/communitymap?category=Organic+Food"
                                               onclick="redirectMod('/communitymap?category=Organic+Food&')">Organic
                    Food</a></li>
                <li class="list-group-item"><a href="/communitymap?category=Local+Food"
                                               onclick="redirectMod('/communitymap?category=Local+Food&')">Local
                    Food</a></li>
            </ul>
            <hr/>
            <form method="post">
                Suggest a Category: <input type="text" id="suggested-category" name="suggested-category"
                                           class="form-control" style="width:75%; display:inline; padding-top:3px;"/>
                <input class="btn btn-primary" type="submit" name="yt1" value="Send"/></form>
        </div>
    </div>
</div>
<!--content area end-->
</div>

<script src="script/jquery.min.js"></script>
</body>
</html>
